CREATE TABLE CLIENTES (
    CLICODIGO CHAR(7) PRIMARY KEY,
    CLINOMBRE CHAR(60) NOT NULL,
    CLIIDENTIFICACION CHAR(13) NOT NULL CHECK (CLIIDENTIFICACION ~ '^[0-9]{13}$'),
    CLIDIRECCION CHAR(60) NOT NULL,
    CLITELEFONO CHAR(10) NOT NULL CHECK (CLITELEFONO ~ '^[0-9]{10}$'),
    CLICELULAR CHAR(10) NOT NULL CHECK (CLICELULAR ~ '^[0-9]{10}$'),
    CLIEMAIL CHAR(60) CHECK (CLIEMAIL ~ '^[^@]+@[^@]+\.[^@]+$'),
    CLITIPO CHAR(3) NOT NULL CHECK (CLITIPO IN ('NAT', 'JUR')),
    CLISTATUS CHAR(3) NOT NULL CHECK (CLISTATUS IN ('ACT', 'INA'))
);

CREATE TABLE PRODUCTOS (
    PROCODIGO CHAR(9) PRIMARY KEY,
    PRODESCRIPCION CHAR(50) NOT NULL,
    PROUNIDADMEDIDA CHAR(3) NOT NULL,
    PROSALDOINICIAL DECIMAL(9,2) NOT NULL CHECK (PROSALDOINICIAL >= 0),
    PROINGRESOS DECIMAL(9,2) NOT NULL CHECK (PROINGRESOS >= 0),
    PROEGRESOS DECIMAL(9,2) NOT NULL CHECK (PROEGRESOS >= 0),
    PROAJUSTES DECIMAL(9,2) NOT NULL CHECK (PROAJUSTES >= 0),
    PROSALDOFINAL DECIMAL(9,2) NOT NULL CHECK (PROSALDOFINAL >= 0),
    PROCOSTOUM DECIMAL(7,2) NOT NULL CHECK (PROCOSTOUM >= 0),
    PROPRECIOUM DECIMAL(7,2) NOT NULL CHECK (PROPRECIOUM >= 0),
    PROSTATUS CHAR(3) NOT NULL CHECK (PROSTATUS IN ('ACT', 'INA'))
);

CREATE TABLE FACTURAS (
    FACNUMERO CHAR(9) PRIMARY KEY,
    CLICODIGO CHAR(7) NOT NULL REFERENCES CLIENTES(CLICODIGO),
    FACFECHA DATE NOT NULL CHECK (FACFECHA >= '1900-01-01'),
    FACSUBTOTAL DECIMAL(9,2) NOT NULL CHECK (FACSUBTOTAL >= 0),
    FACDESCUENTO DECIMAL(9,2) CHECK (FACDESCUENTO >= 0),
    FACIVA DECIMAL(9,2) CHECK (FACIVA >= 0),
    FACICE DECIMAL(9,2) CHECK (FACICE >= 0),
    FACFORMAPAGO CHAR(5) NOT NULL,
    FACSTATUS CHAR(3) NOT NULL CHECK (FACSTATUS IN ('ACT', 'INA'))
);

CREATE TABLE PXF (
    FACNUMERO CHAR(9) NOT NULL REFERENCES FACTURAS(FACNUMERO),
    PROCODIGO CHAR(9) NOT NULL REFERENCES PRODUCTOS(PROCODIGO),
    PXFCANTIDAD DECIMAL(9,2) NOT NULL CHECK (PXFCANTIDAD >= 0),
    PXFVALOR DECIMAL(7,2) NOT NULL CHECK (PXFVALOR >= 0),
    PXFSUBTOTAL DECIMAL(9,2) NOT NULL CHECK (PXFSUBTOTAL >= 0),
    PXFSTATUS CHAR(3) NOT NULL CHECK (PXFSTATUS IN ('ACT', 'INA')),
    PRIMARY KEY (FACNUMERO, PROCODIGO)
);

CREATE TABLE EMPLEADOS (
    EMPCODIGO CHAR(7) PRIMARY KEY,
    EMPAPELLIDO1 CHAR(30) NOT NULL,
    EMPAPELLIDO2 CHAR(30),
    EMPNOMBRE1 CHAR(30) NOT NULL,
    EMPNOMBRE2 CHAR(30),
    EMPFECHANACIMIENTO DATE NOT NULL,
    EMPSEXO CHAR(1) NOT NULL CHECK (EMPSEXO IN ('H', 'M')),
    EMPEMAIL CHAR(60) NOT NULL CHECK (EMPEMAIL ~ '^[^@]+@[^@]+\.[^@]+$'),
    EMPDIRECCION CHAR(60) NOT NULL,
    EMPTIPOSANGRE CHAR(3) NOT NULL,
    EMPSUELDO NUMERIC(7,2) NOT NULL CHECK (EMPSUELDO >= 0),
    EMPBANCO CHAR(30) NOT NULL,
    EMPCUENTA CHAR(20) NOT NULL,
    EMPSTATUS CHAR(3) NOT NULL CHECK (EMPSTATUS IN ('ACT', 'INA'))
);

CREATE TABLE AJUSTES (
    AJUCODIGO SERIAL PRIMARY KEY,
    EMPCODIGO CHAR(7) NOT NULL REFERENCES EMPLEADOS(EMPCODIGO),
    AJUDESCRIPCION CHAR(60) NOT NULL,
    AJUFECHA DATE NOT NULL CHECK (AJUFECHA >= '1900-01-01'),
    AJUCANTIDADTOTAL NUMERIC(9,2) CHECK (AJUCANTIDADTOTAL >= 0)
);

CREATE TABLE BONIFICACIONES (
    BONCODIGO CHAR(5) PRIMARY KEY,
    BONDESCRIPCION CHAR(30) NOT NULL,
    BONVALOR DECIMAL(7,2) NOT NULL CHECK (BONVALOR >= 0)
);

CREATE TABLE BXN (
    BONCODIGO CHAR(5) NOT NULL REFERENCES BONIFICACIONES(BONCODIGO),
    NOMCODIGO CHAR(7) NOT NULL,
    BXNVALOR DECIMAL(7,2) NOT NULL CHECK (BXNVALOR >= 0),
    BXNSTATUS CHAR(3) NOT NULL,
    PRIMARY KEY (BONCODIGO, NOMCODIGO)
);

CREATE TABLE DESCUENTOS (
    DESCODIGO CHAR(5) PRIMARY KEY,
    DESDESCRIPCION CHAR(30) NOT NULL,
    DESVALOR DECIMAL(7,2) NOT NULL CHECK (DESVALOR >= 0)
);

CREATE TABLE DXN (
    NOMCODIGO CHAR(7) NOT NULL,
    DESCODIGO CHAR(5) NOT NULL REFERENCES DESCUENTOS(DESCODIGO),
    DXNVALOR DECIMAL(7,2) NOT NULL CHECK (DXNVALOR >= 0),
    DXNSTATUS CHAR(3) NOT NULL,
    PRIMARY KEY (NOMCODIGO, DESCODIGO)
);

CREATE TABLE NOMINAS (
    NOMCODIGO CHAR(7) PRIMARY KEY,
    EMPCODIGO CHAR(7) NOT NULL REFERENCES EMPLEADOS(EMPCODIGO),
    NOMANIO CHAR(4) NOT NULL,
    NOMMES CHAR(2) NOT NULL,
    NOMFECHAINICIAL DATE NOT NULL CHECK (NOMFECHAINICIAL >= '1900-01-01'),
    NOMFECHAFINAL DATE NOT NULL CHECK (NOMFECHAFINAL >= '1900-01-01'),
    NOMSTATUS CHAR(3) NOT NULL CHECK (NOMSTATUS IN ('ACT', 'INA'))
);

CREATE TABLE INGRESOS (
    INGCODIGO SERIAL PRIMARY KEY,
    EMPCODIGO CHAR(7) NOT NULL REFERENCES EMPLEADOS(EMPCODIGO),
    INGDESCRIPCION CHAR(30) NOT NULL,
    INGFECHA DATE NOT NULL CHECK (INGFECHA >= '1900-01-01'),
    INGCANTIDADTOTAL NUMERIC(9,2) CHECK (INGCANTIDADTOTAL >= 0),
    INGREFERENCIA CHAR(60)
);

CREATE TABLE SALIDAS (
    SALCODIGO SERIAL PRIMARY KEY,
    EMPCODIGO CHAR(7) NOT NULL REFERENCES EMPLEADOS(EMPCODIGO),
    SALDESCRIPCION CHAR(30) NOT NULL,
    SALFECHA DATE NOT NULL CHECK (SALFECHA >= '1900-01-01'),
    SALCANTIDADTOTAL NUMERIC(9,2) CHECK (SALCANTIDADTOTAL >= 0),
    SALREFERENCIA CHAR(60)
);

CREATE TABLE COMPRAS (
    OCNUMERO CHAR(9) PRIMARY KEY,
    PRVCODIGO CHAR(7) NOT NULL,
    OCFECHA DATE NOT NULL CHECK (OCFECHA >= '1900-01-01'),
    OCSUBTOTAL NUMERIC(9,2) NOT NULL CHECK (OCSUBTOTAL >= 0),
    OCDESCUENTO NUMERIC(9,2) CHECK (OCDESCUENTO >= 0),
    OCVALOR_IVA NUMERIC(9,2) CHECK (OCVALOR_IVA >= 0),
    OCVALOR_ICE NUMERIC(9,2) CHECK (OCVALOR_ICE >= 0),
    OCFORMAPAGO CHAR(5) NOT NULL,
    OCFACTURA_ASOCIADA CHAR(30) NOT NULL,
    OCSTATUS CHAR(3) CHECK (OCSTATUS IN ('ACT', 'INA'))
);

CREATE TABLE PROVEEDORES (
    PRVCODIGO CHAR(7) PRIMARY KEY,
    PRVNOMBRE CHAR(30) NOT NULL,
    PRVIDENTIFICACION CHAR(10) NOT NULL CHECK (PRVIDENTIFICACION ~ '^[0-9]{10}$'),
    PRVDIRECCION CHAR(60) NOT NULL,
    PRVTELEFONO CHAR(10) CHECK (PRVTELEFONO ~ '^[0-9]{10}$'),
    PRVCELULAR CHAR(10) CHECK (PRVCELULAR ~ '^[0-9]{10}$'),
    PRVEMAIL CHAR(60) CHECK (PRVEMAIL ~ '^[^@]+@[^@]+\.[^@]+$'),
    PRVTIPO CHAR(3) NOT NULL CHECK (PRVTIPO IN ('NAT', 'JUR')),
    PRVSTATUS CHAR(3) NOT NULL CHECK (PRVSTATUS IN ('ACT', 'INA'))
);

CREATE TABLE PXA (
    AJUCODIGO INT NOT NULL REFERENCES AJUSTES(AJUCODIGO),
    PROCODIGO CHAR(9) NOT NULL REFERENCES PRODUCTOS(PROCODIGO),
    PXACANTIDAD NUMERIC(9,2) NOT NULL CHECK (PXACANTIDAD >= 0),
    PRIMARY KEY (AJUCODIGO, PROCODIGO)
);

CREATE TABLE PXI (
    INGCODIGO INT NOT NULL REFERENCES INGRESOS(INGCODIGO),
    PROCODIGO CHAR(9) NOT NULL REFERENCES PRODUCTOS(PROCODIGO),
    PXICANTIDAD NUMERIC(9,2) NOT NULL CHECK (PXICANTIDAD >= 0),
    PRIMARY KEY (INGCODIGO, PROCODIGO)
);

CREATE TABLE PXO (
    OCNUMERO CHAR(9) NOT NULL REFERENCES COMPRAS(OCNUMERO),
    PROCODIGO CHAR(9) NOT NULL REFERENCES PRODUCTOS(PROCODIGO),
    PXCCANTIDAD NUMERIC(9,2) NOT NULL CHECK (PXCCANTIDAD >= 0),
    PXCVALOR NUMERIC(7,2) NOT NULL CHECK (PXCVALOR >= 0),
    PXCSUBTOTAL NUMERIC(9,2) NOT NULL CHECK (PXCSUBTOTAL >= 0),
    PXCSTATUS CHAR(3) NOT NULL CHECK (PXCSTATUS IN ('ACT', 'INA')),
    PRIMARY KEY (OCNUMERO, PROCODIGO)
);

CREATE TABLE PXS (
    SALCODIGO INT NOT NULL REFERENCES SALIDAS(SALCODIGO),
    PROCODIGO CHAR(9) NOT NULL REFERENCES PRODUCTOS(PROCODIGO),
    PXSCANTIDAD NUMERIC(9,2) NOT NULL CHECK (PXSCANTIDAD >= 0),
    PRIMARY KEY (SALCODIGO, PROCODIGO)
);


-- Insertar datos en la tabla CLIENTES
INSERT INTO CLIENTES (CLICODIGO, CLINOMBRE, CLIIDENTIFICACION, CLIDIRECCION, CLITELEFONO, CLICELULAR, CLIEMAIL, CLITIPO, CLISTATUS) VALUES
('C000001', 'JUAN PEREZ', '1234567890123', 'CALLE FALSA 123', '0123456789', '0987654321', 'juan@example.com', 'NAT', 'ACT'),
('C000002', 'MARIA LOPEZ', '1234567890124', 'AVENIDA SIEMPRE VIVA 742', '0234567890', '0987654322', 'maria@example.com', 'JUR', 'ACT');

-- Insertar datos en la tabla PRODUCTOS
INSERT INTO PRODUCTOS (PROCODIGO, PRODESCRIPCION, PROUNIDADMEDIDA, PROSALDOINICIAL, PROINGRESOS, PROEGRESOS, PROAJUSTES, PROSALDOFINAL, PROCOSTOUM, PROPRECIOUM, PROSTATUS) VALUES
('P0000001', 'LAPTOP', 'UND', 10.00, 5.00, 2.00, 1.00, 12.00, 500.00, 600.00, 'ACT'),
('P0000002', 'MOUSE', 'UND', 100.00, 50.00, 10.00, 5.00, 135.00, 10.00, 15.00, 'ACT');

-- Insertar datos en la tabla FACTURAS
INSERT INTO FACTURAS (FACNUMERO, CLICODIGO, FACFECHA, FACSUBTOTAL, FACDESCUENTO, FACIVA, FACICE, FACFORMAPAGO, FACSTATUS) VALUES
('F00000001', 'C000001', '2023-06-01', 1000.00, 50.00, 120.00, 0.00, 'EFECT', 'ACT'),
('F00000002', 'C000002', '2023-06-02', 2000.00, 100.00, 240.00, 0.00, 'TARJC', 'ACT');

-- Insertar datos en la tabla PXF
INSERT INTO PXF (FACNUMERO, PROCODIGO, PXFCANTIDAD, PXFVALOR, PXFSUBTOTAL, PXFSTATUS) VALUES
('F00000001', 'P0000001', 1.00, 600.00, 600.00, 'ACT'),
('F00000002', 'P0000002', 10.00, 15.00, 150.00, 'ACT');

-- Insertar datos en la tabla EMPLEADOS
INSERT INTO EMPLEADOS (EMPCODIGO, EMPAPELLIDO1, EMPAPELLIDO2, EMPNOMBRE1, EMPNOMBRE2, EMPFECHANACIMIENTO, EMPSEXO, EMPEMAIL, EMPDIRECCION, EMPTIPOSANGRE, EMPSUELDO, EMPBANCO, EMPCUENTA, EMPSTATUS) VALUES
('E000001', 'GARCIA', 'LOPEZ', 'CARLOS', 'ANDRES', '1990-05-15', 'H', 'carlos@example.com', 'CALLE 1 #123', 'O+', 1500.00, 'BANCO A', '1234567890', 'ACT'),
('E000002', 'RODRIGUEZ', 'MARTINEZ', 'ANA', 'MARIA', '1985-10-30', 'M', 'ana@example.com', 'CALLE 2 #456', 'A+', 2000.00, 'BANCO B', '0987654321', 'ACT');

-- Insertar datos en la tabla AJUSTES
INSERT INTO AJUSTES (EMPCODIGO, AJUDESCRIPCION, AJUFECHA, AJUCANTIDADTOTAL) VALUES
('E000001', 'Ajuste de inventario', '2023-06-05', 100.00),
('E000002', 'Ajuste de precios', '2023-06-06', 200.00);

-- Insertar datos en la tabla BONIFICACIONES
INSERT INTO BONIFICACIONES (BONCODIGO, BONDESCRIPCION, BONVALOR) VALUES
('B0001', 'Bonificación por desempeño', 500.00),
('B0002', 'Bonificación por puntualidad', 300.00);

-- Insertar datos en la tabla BXN
INSERT INTO BXN (BONCODIGO, NOMCODIGO, BXNVALOR, BXNSTATUS) VALUES
('B0001', 'N000001', 500.00, 'ACT'),
('B0002', 'N000002', 300.00, 'ACT');

-- Insertar datos en la tabla DESCUENTOS
INSERT INTO DESCUENTOS (DESCODIGO, DESDESCRIPCION, DESVALOR) VALUES
('D0001', 'Descuento por retraso', 100.00),
('D0002', 'Descuento por ausencia', 200.00);

-- Insertar datos en la tabla DXN
INSERT INTO DXN (NOMCODIGO, DESCODIGO, DXNVALOR, DXNSTATUS) VALUES
('N000001', 'D0001', 100.00, 'ACT'),
('N000002', 'D0002', 200.00, 'ACT');

-- Insertar datos en la tabla NOMINAS
INSERT INTO NOMINAS (NOMCODIGO, EMPCODIGO, NOMANIO, NOMMES, NOMFECHAINICIAL, NOMFECHAFINAL, NOMSTATUS) VALUES
('N000001', 'E000001', '2023', '06', '2023-06-01', '2023-06-30', 'ACT'),
('N000002', 'E000002', '2023', '06', '2023-06-01', '2023-06-30', 'ACT');

-- Insertar datos en la tabla INGRESOS
INSERT INTO INGRESOS (EMPCODIGO, INGDESCRIPCION, INGFECHA, INGCANTIDADTOTAL, INGREFERENCIA) VALUES
('E000001', 'Ingreso adicional', '2023-06-01', 1000.00, 'Ref001'),
('E000002', 'Ingreso extraordinario', '2023-06-02', 1500.00, 'Ref002');

-- Insertar datos en la tabla SALIDAS
INSERT INTO SALIDAS (EMPCODIGO, SALDESCRIPCION, SALFECHA, SALCANTIDADTOTAL, SALREFERENCIA) VALUES
('E000001', 'Salida de materiales', '2023-06-01', 500.00, 'Ref003'),
('E000002', 'Salida de equipo', '2023-06-02', 700.00, 'Ref004');

-- Insertar datos en la tabla COMPRAS
INSERT INTO COMPRAS (OCNUMERO, PRVCODIGO, OCFECHA, OCSUBTOTAL, OCDESCUENTO, OCVALOR_IVA, OCVALOR_ICE, OCFORMAPAGO, OCFACTURA_ASOCIADA, OCSTATUS) VALUES
('OC000001', 'PRV001', '2023-06-01', 2000.00, 100.00, 240.00, 0.00, 'EFECT', 'F00000001', 'ACT'),
('OC000002', 'PRV002', '2023-06-02', 3000.00, 150.00, 360.00, 0.00, 'TARJC', 'F00000002', 'ACT');

-- Insertar datos en la tabla PROVEEDORES
INSERT INTO PROVEEDORES (PRVCODIGO, PRVNOMBRE, PRVIDENTIFICACION, PRVDIRECCION, PRVTELEFONO, PRVCELULAR, PRVEMAIL, PRVTIPO, PRVSTATUS) VALUES
('PRV001', 'PROVEEDOR 1', '1234567890', 'DIRECCION 1', '0123456789', '0987654321', 'proveedor1@example.com', 'JUR', 'ACT'),
('PRV002', 'PROVEEDOR 2', '1234567891', 'DIRECCION 2', '0234567890', '0987654322', 'proveedor2@example.com', 'NAT', 'ACT');

-- Insertar datos en la tabla PXA
INSERT INTO PXA (AJUCODIGO, PROCODIGO, PXACANTIDAD) VALUES
(1, 'P0000001', 10.00),
(2, 'P0000002', 20.00);

-- Insertar datos en la tabla PXI
INSERT INTO PXI (INGCODIGO, PROCODIGO, PXICANTIDAD) VALUES
(1, 'P0000001', 5.00),
(2, 'P0000002', 15.00);

-- Insertar datos en la tabla PXO
INSERT INTO PXO (OCNUMERO, PROCODIGO, PXCCANTIDAD, PXCVALOR, PXCSUBTOTAL, PXCSTATUS) VALUES
('OC000001', 'P0000001', 10.00, 500.00, 5000.00, 'ACT'),
('OC000002', 'P0000002', 20.00, 10.00, 200.00, 'ACT');

-- Insertar datos en la tabla PXS
INSERT INTO PXS (SALCODIGO, PROCODIGO, PXSCANTIDAD) VALUES
(1, 'P0000001', 5.00),
(2, 'P0000002', 10.00);
